{% load static %}
<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>TODO一覧</title>
<style>
body { font-family: 'Noto Sans JP', sans-serif; background: #746e6e; color: #eee; margin: 0; padding: 0; display: flex; flex-direction: column; min-height: 100vh; }
header { background: #1a1a1a; text-align: center; padding: 20px 0; }
header h1 { margin: 0; }
main { flex: 1; width: 90%; max-width: 800px; margin: 40px auto; }
.table-container { background: #1a1a1a; border-radius: 15px; padding: 20px; }
table { width: 100%; border-collapse: collapse; }
th, td { padding: 12px; text-align: left; border-bottom: 1px solid #333; }
th { background: #2a2a2a; }
tr.completed-row { color: #888; text-decoration: line-through; }
tr.overdue-row { color: #ff6666; }
.btn { padding: 6px 12px; border-radius: 8px; text-decoration: none; color: #fff; margin-right: 5px; }
.btn-done { background: #4caf50; } .btn-done:hover { background: #5cd65c; }
.btn-reopen { background: #9b30ff; } .btn-reopen:hover { background: #b84cff; }
.btn-edit { background: #007bff; } .btn-edit:hover { background: #3399ff; }
.btn-delete { background: #ff3f6c; } .btn-delete:hover { background: #ff638c; }
.add-btn { display: block; background: linear-gradient(135deg, #6a0dad, #9b30ff); color: white; text-align: center; padding: 12px 18px; border-radius: 10px; text-decoration: none; font-weight: bold; margin-bottom: 25px; }
.add-btn:hover { transform: scale(1.05); }
footer { text-align: center; color: #ccc; padding: 20px; margin-top: auto; }
</style>
</head>
<body>
<header><h1>TODO一覧</h1></header>
<main>
<a href="{% url 'work10:create' %}" class="add-btn">＋ 新しいタスクを追加</a>
<div class="table-container">
<table>
<thead>
<tr>
<th>完了状況</th>
<th>タイトル</th>
<th>期限</th>
<th>登録日</th>
<th>操作</th>
</tr>
</thead>
<tbody>
{% for todo in todos %}
<tr class="{% if todo.is_completed %}completed-row{% elif todo.due_date and todo.due_date < today %}overdue-row{% endif %}">
<td>{% if todo.is_completed %}✅ 完了{% else %}⏳ 未完了{% endif %}</td>
<td>{{ todo.title }}</td>
<td>{{ todo.due_date|default:"－" }}</td>
<td>{{ todo.created_at|date:"Y/m/d H:i" }}</td>
<td>
<a href="{% url 'work10:toggle' todo.pk %}" class="btn {% if todo.is_completed %}btn-reopen{% else %}btn-done{% endif %}">{% if todo.is_completed %}未完了に戻す{% else %}完了{% endif %}</a>
<a href="{% url 'work10:edit' todo.pk %}" class="btn btn-edit">編集</a>
<a href="{% url 'work10:delete' todo.pk %}" class="btn btn-delete">削除</a>
</td>
</tr>
{% empty %}
<tr><td colspan="5">タスクが登録されていません。</td></tr>
{% endfor %}
</tbody>
</table>
</div>
</main>
<footer>© 2025 TODOアプリ</footer>
</body>
</html>
